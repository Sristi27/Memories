(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),i=n.n(o),c=n(11),r=n.n(c),l=(n(104),n(7)),s=(n(105),n(13)),j=n(12),d=n(16),u=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:"UPDATE"==t.type?Object(d.a)(Object(d.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEPIC"==t.type?Object(d.a)(Object(d.a)({},e),{},{image:t.payload}):e},h=n(141),p=n(146),b=n(147),g=n(68),O=n(144),f=n(148),x=n(81),m=n.n(x),y=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},nav:{color:"black",paddingTop:"10px",backgroundColor:"transparent"},button:{textTransform:"capitalize"}}}));function v(){var e=y(),t=Object(o.useContext)(ue),n=t.state,i=t.dispatch;return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(p.a,{position:"static",className:e.nav,children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(f.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(m.a,{})}),Object(a.jsx)(g.a,{variant:"h6",className:e.title,children:Object(a.jsx)(j.b,{to:"/",children:"Instagram "})}),n?[Object(a.jsx)(j.b,{to:"/createpost",children:Object(a.jsx)(O.a,{color:"inherit",className:e.button,children:"Create Post"})}),Object(a.jsx)(j.b,{to:"/myfollowingpost",children:Object(a.jsx)(O.a,{color:"inherit",className:e.button,children:" Following Posts"})}),Object(a.jsx)(j.b,{to:"/profile",children:Object(a.jsx)(O.a,{color:"inherit",className:e.button,children:" Profile"})}),Object(a.jsx)(j.b,{to:"/signin",children:Object(a.jsx)(O.a,{className:e.button,variant:"contained",color:"secondary",style:{marginLeft:"10px"},onClick:function(){localStorage.clear(),i({type:"CLEAR"})},children:"Logout"})})]:[Object(a.jsx)(j.b,{to:"/signin",children:Object(a.jsx)(O.a,{color:"inherit",className:e.button,children:"Login"})}),Object(a.jsx)(j.b,{to:"/signup",children:Object(a.jsx)(O.a,{color:"inherit",className:e.button,children:"Signup"})})]]})})})}var w=n(149),S=n(152),_=n(150),C=n(157),N=n(158),B=Object(h.a)({root:{width:500,textAlign:"center",margin:"40px auto"},title:{fontSize:14},pos:{marginBottom:12}});function k(){var e=B(),t=Object(o.useState)(""),n=Object(l.a)(t,2),i=n[0],c=n[1],r=Object(o.useState)(""),d=Object(l.a)(r,2),u=d[0],h=d[1],p=Object(o.useState)("false"),b=Object(l.a)(p,2),f=b[0],x=b[1],m=Object(o.useState)("true"),y=Object(l.a)(m,2),v=y[0],k=y[1],A=Object(s.f)(),T=Object(o.useContext)(ue),I=(T.state,T.dispatch);return Object(a.jsxs)(w.a,{className:e.root,children:[f?"":Object(a.jsx)(N.a,{severity:"error",children:"Please fill all the fields!"}),v?"":Object(a.jsx)(N.a,{severity:"error",children:"Invalid Email!"}),Object(a.jsxs)(_.a,{children:[Object(a.jsx)(g.a,{variant:"h5",style:{textTransform:"uppercase",margin:"20px auto",fontWeight:"bold"},children:"Login"}),Object(a.jsxs)("form",{children:[Object(a.jsx)(C.a,{type:"email",style:{width:"80%",margin:"10px auto",padding:"10px"},value:u,onChange:function(e){return h(e.target.value)},placeholder:"Enter your email"}),Object(a.jsx)(C.a,{type:"password",style:{width:"80%",margin:"10px auto",padding:"10px"},value:i,onChange:function(e){return c(e.target.value)},placeholder:"Enter your password"})]})]}),Object(a.jsx)(S.a,{children:Object(a.jsx)(O.a,{style:{margin:"0 auto",textTransform:"capitalize",fontSize:"17px"},variant:"contained",color:"primary",type:"submit",onClick:function(){return x("false"),k("true"),void(""===u||""===i?x(!f):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(u)?fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:i})}).then((function(e){return e.json()})).then((function(e){e.error?console.log(e.error):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),I({type:"USER",payload:e.user}),console.log(e),A.push("/"))})).catch((function(e){return console.log(e)})):k(!v))},children:"Login"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)(g.a,{style:{display:"inline"},children:"New here?"}),Object(a.jsx)(j.b,{to:"/signup",children:Object(a.jsx)(O.a,{style:{textTransform:"capitalize",marginLeft:"2px"},color:"primary",children:"Signup"})})]})]})}var A=n.p+"static/media/profile.a76f7ce3.png",T=Object(h.a)({root:{width:500,textAlign:"center",margin:"40px auto"},title:{fontSize:14},pos:{marginBottom:12},image:{height:100,width:100,borderRadius:"50%",cursor:"pointer"}});function I(){var e=Object(s.f)(),t=Object(o.useState)(""),n=Object(l.a)(t,2),i=n[0],c=n[1],r=Object(o.useState)(""),d=Object(l.a)(r,2),u=d[0],h=d[1],p=Object(o.useState)(""),b=Object(l.a)(p,2),f=b[0],x=b[1],m=Object(o.useState)("false"),y=Object(l.a)(m,2),v=y[0],B=y[1],k=Object(o.useState)("true"),I=Object(l.a)(k,2),L=I[0],z=I[1],E=Object(o.useState)(""),P=Object(l.a)(E,2),R=P[0],J=P[1],F=Object(o.useState)(void 0),U=Object(l.a)(F,2),W=U[0],D=U[1],Z=Object(o.useState)(null),G=Object(l.a)(Z,2),H=G[0],$=G[1];Object(o.useEffect)((function(){W&&M()}),[W]);var M=function(){""===f||""===u?B(!v):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(f)?fetch("/signup",{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({name:i,email:f,password:u,url:W})}).then((function(e){return e.json()})).then((function(t){t.error?B(!v):(console.log(t),e.push("/signin"))})).catch((function(e){return console.log(e)})):z(!L)},q=function(){R?function(){var e=new FormData;e.append("file",R),e.append("upload_preset","insta - clone"),e.append("cloud_name","ducw5cejx"),fetch("https://api.cloudinary.com/v1_1/ducw5cejx/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){D(e.url)})).catch((function(e){return console.log(e)}))}():M()},K=T();return Object(a.jsxs)(w.a,{className:K.root,children:[v?"":Object(a.jsx)(N.a,{severity:"error",children:"Please fill all the fields!"}),L?"":Object(a.jsx)(N.a,{severity:"error",children:"Invalid Email!"}),Object(a.jsxs)(_.a,{children:[Object(a.jsx)(g.a,{variant:"h5",style:{textTransform:"uppercase",margin:"20px auto",fontWeight:"bold"},children:"Signup"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",multiple:!0,onChange:function(e){J(e.target.files[0]),$(URL.createObjectURL(e.target.files[0])),console.log(URL.createObjectURL(e.target.files[0]))},type:"file"}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:H?Object(a.jsx)("img",{src:H,className:K.image}):Object(a.jsx)("img",{src:A,className:K.image})}),Object(a.jsx)(C.a,{type:"text",style:{width:"80%",margin:"10px auto",padding:"10px"},value:i,onChange:function(e){return c(e.target.value)},placeholder:"Enter your name"}),Object(a.jsx)(C.a,{type:"email",style:{width:"80%",margin:"10px auto",padding:"10px"},value:f,onChange:function(e){return x(e.target.value)},placeholder:"Enter your email"}),Object(a.jsx)(C.a,{type:"password",style:{width:"80%",margin:"10px auto",padding:"10px"},value:u,onChange:function(e){return h(e.target.value)},placeholder:"Enter your password"})]})]}),Object(a.jsx)(S.a,{children:Object(a.jsx)(O.a,{style:{margin:"0 auto",textTransform:"capitalize",fontSize:"17px"},variant:"contained",color:"primary",type:"submit",onClick:function(){return q()},children:"Signup"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)(g.a,{style:{display:"inline"},children:"Already have an account?"}),Object(a.jsx)(j.b,{to:"/signin",children:Object(a.jsx)(O.a,{style:{textTransform:"capitalize",marginLeft:"2px"},color:"primary",children:"Signin"})})]})]})}var L=n(153),z=n(154),E=n(159),P=n(64),R=n.n(P),J=n(63),F=n.n(J),U=n(66),W=n.n(U),D=n(67),Z=n(62),G=n.n(Z),H=n(65),$=n.n(H),M=n(61),q=n.n(M),K=n(151),Q=Object(h.a)((function(e){return{root:{maxWidth:750,margin:"20px auto"},icons:{display:"block",width:"100%"},media:{height:0,paddingTop:"56.25%"},avatar:{backgroundColor:D.a[500]},col1:{color:"red"},col2:{color:"light-grey"},inp:{display:"block"},show:{display:"block"},hide:{display:"none"},icon:{fontSize:"10px"}}}));function V(){var e=Q(),t=Object(o.useState)(""),n=Object(l.a)(t,2),i=n[0],c=n[1],r=Object(o.useState)([]),s=Object(l.a)(r,2),d=s[0],u=s[1],h=Object(o.useContext)(ue),p=h.state,b=(h.dispatch,Object(o.useState)(!0)),x=Object(l.a)(b,2),m=x[0],y=x[1];Object(o.useEffect)((function(){fetch("/allposts",{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),u(e.posts),y(!1)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),p&&!m?d.map((function(t){return Object(a.jsxs)(w.a,{className:e.root,children:[Object(a.jsx)(L.a,{avatar:Object(a.jsx)(j.b,{to:t.postedBy._id!==p._id?"/profile/"+t.postedBy._id:"/profile",children:Object(a.jsx)(E.a,{"aria-label":"recipe",className:e.avatar,src:t.postedBy.image})}),action:Object(a.jsx)(f.a,{"aria-label":"settings",children:Object(a.jsx)(q.a,{})}),title:Object(a.jsx)(j.b,{to:t.postedBy._id!==p._id?"/profile/"+t.postedBy._id:"/profile",children:t.postedBy.name}),subheader:t.title}),Object(a.jsx)(z.a,{className:e.media,image:t.image,title:"Paella dish"}),Object(a.jsxs)(_.a,{children:[Object(a.jsx)(f.a,{className:e.col1,children:Object(a.jsx)(G.a,{})}),t.likes.includes(p._id)?Object(a.jsx)(f.a,{"aria-label":"unlike",onClick:function(){return e=t._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({post_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(F.a,{})}):Object(a.jsx)(f.a,{"aria-label":"like",onClick:function(){return e=t._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({post_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(f.a,{"aria-label":"share",children:Object(a.jsx)($.a,{})}),t.postedBy._id===p._id?Object(a.jsx)(f.a,{"aria-label":"delete",onClick:function(){return e=t._id,void fetch("/deletepost/".concat(e),{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"delete"}).then((function(e){return e.json})).then((function(e){var t=d.filter((function(t){return t._id!==e._id}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(W.a,{})}):"",Object(a.jsxs)("div",{style:{marginLeft:"11px"},children:[Object(a.jsxs)(g.a,{style:{margin:"10px 0"},children:[t.likes.length," Likes"]}),Object(a.jsx)(g.a,{variant:"body2",color:"textSecondary",component:"p",children:t.body}),t.comments.map((function(e){return Object(a.jsxs)("h4",{children:[Object(a.jsx)("span",{style:{fontWeight:"500"},children:e.postedBy.name})," ",e.text]},e._id)}))]})]}),Object(a.jsx)("hr",{}),Object(a.jsx)(S.a,{disableSpacing:!0,style:{marginLeft:"20px",bottom:"0"},children:Object(a.jsxs)("form",{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),""!==e.target[0].value&&function(e,t){fetch("/comment",{headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},method:"put",body:JSON.stringify({text:e,postId:t})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t),c("")}))}(e.target[0].value,t._id)},children:[Object(a.jsx)(K.a,{style:{width:"90%"},placeholder:"Add a Comment",value:i,onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(O.a,{color:"primary",type:"submit",children:"Post"})]})})]},t._id)})):Object(a.jsx)("h3",{children:"Loading..."})]})}var X=Object(h.a)((function(e){return{root:{maxWidth:750,margin:"20px auto"},icons:{display:"block",width:"100%"},media:{height:0,paddingTop:"56.25%"},avatar:{backgroundColor:D.a[500]},col1:{color:"red"},col2:{color:"light-grey"},inp:{display:"block"},show:{display:"block"},hide:{display:"none"},icon:{fontSize:"10px"}}}));function Y(){var e=X(),t=Object(o.useState)(""),n=Object(l.a)(t,2),i=n[0],c=n[1],r=Object(o.useState)([]),s=Object(l.a)(r,2),d=s[0],u=s[1],h=Object(o.useContext)(ue),p=h.state,b=(h.dispatch,Object(o.useState)(!0)),x=Object(l.a)(b,2),m=x[0],y=x[1];Object(o.useEffect)((function(){fetch("/getmyfollowingposts",{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),u(e.posts),y(!1)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),d&&!m?d.map((function(t){return Object(a.jsxs)(w.a,{className:e.root,children:[Object(a.jsx)(L.a,{avatar:Object(a.jsx)(j.b,{to:t.postedBy._id!==p._id?"/profile/"+t.postedBy._id:"/profile",children:Object(a.jsx)(E.a,{"aria-label":"recipe",className:e.avatar,children:"R"})}),action:Object(a.jsx)(f.a,{"aria-label":"settings",children:Object(a.jsx)(q.a,{})}),title:Object(a.jsx)(j.b,{to:t.postedBy._id!==p._id?"/profile/"+t.postedBy._id:"/profile",children:t.postedBy.name}),subheader:t.title}),Object(a.jsx)(z.a,{className:e.media,image:t.image,title:"Paella dish"}),Object(a.jsxs)(_.a,{children:[Object(a.jsx)(f.a,{className:e.col1,children:Object(a.jsx)(G.a,{})}),t.likes.includes(p._id)?Object(a.jsx)(f.a,{"aria-label":"unlike",onClick:function(){return e=t._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({post_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(F.a,{})}):Object(a.jsx)(f.a,{"aria-label":"like",onClick:function(){return e=t._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({post_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(f.a,{"aria-label":"share",children:Object(a.jsx)($.a,{})}),t.postedBy._id===p._id?Object(a.jsx)(f.a,{"aria-label":"delete",onClick:function(){return e=t._id,void fetch("/deletepost/".concat(e),{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"delete"}).then((function(e){return e.json})).then((function(e){var t=d.filter((function(t){return t._id!==e._id}));u(t)})).catch((function(e){return console.log(e)}));var e},children:Object(a.jsx)(W.a,{})}):"",Object(a.jsxs)("div",{style:{marginLeft:"11px"},children:[Object(a.jsxs)(g.a,{style:{margin:"10px 0"},children:[t.likes.length," Likes"]}),Object(a.jsx)(g.a,{variant:"body2",color:"textSecondary",component:"p",children:t.body}),t.comments.map((function(e){return Object(a.jsxs)("h4",{children:[Object(a.jsx)("span",{style:{fontWeight:"500"},children:e.postedBy.name})," ",e.text]},e._id)}))]})]}),Object(a.jsx)("hr",{}),Object(a.jsx)(S.a,{disableSpacing:!0,style:{marginLeft:"20px",bottom:"0"},children:Object(a.jsxs)("form",{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),""!==e.target[0].value&&function(e,t){fetch("/comment",{headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},method:"put",body:JSON.stringify({text:e,postId:t})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=d.map((function(t){return t._id==e._id?e:t}));u(t),c("")}))}(e.target[0].value,t._id)},children:[Object(a.jsx)(K.a,{style:{width:"90%"},placeholder:"Add a Comment",value:i,onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(O.a,{color:"primary",type:"submit",children:"Post"})]})})]},t._id)})):Object(a.jsx)("h3",{children:"Loading..."})]})}var ee=n(155),te=n(156),ne=Object(h.a)((function(e){return{grid:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:"80px"},gridList:{width:800,height:600}}}));var ae=function(){var e=Object(o.useContext)(ue),t=e.state,n=e.dispatch,i=Object(o.useState)([]),c=Object(l.a)(i,2),r=c[0],s=c[1],j=Object(o.useState)(""),u=Object(l.a)(j,2),h=u[0],p=u[1],b=Object(o.useState)(!0),g=Object(l.a)(b,2),O=g[0],f=g[1],x=Object(o.useState)(void 0),m=Object(l.a)(x,2),y=(m[0],m[1]);Object(o.useEffect)((function(){fetch("/mypost",{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"get"}).then((function(e){return e.json()})).then((function(e){s(e.post),f(!1)}))}),[]),Object(o.useEffect)((function(){if(h){var e=new FormData;e.append("file",h),e.append("upload_preset","insta - clone"),e.append("cloud_name","ducw5cejx"),fetch("https://api.cloudinary.com/v1_1/ducw5cejx/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){y(e.url),fetch("/updatepic",{method:"put",headers:{Authorization:"Bearer"+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({url:e.url})}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("user",JSON.stringify(Object(d.a)(Object(d.a)({},t),{},{image:e.image}))),n({type:"UPDATEPIC ",payload:e.image}),window.location.reload()})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}}),[h]);var w=ne();return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),O?Object(a.jsx)("h3",{children:"Loading...."}):Object(a.jsxs)("div",{style:{maxWidth:800,fontWeight:"normal",margin:"10px auto"},children:[Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",margin:"20px 0",borderBottom:"1px solid grey"},children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{style:{height:"160px",width:"170px",borderRadius:"50%",margin:"20px 0"},src:t?t.image:"loading"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{style:{marginTop:"35px",marginBottom:"0"},children:t?t.name:"loading "}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("h3",{style:{marginRight:"10px"},children:[r.length," ",Object(a.jsx)("span",{children:r.length>1?" Posts":" Post"})]}),Object(a.jsxs)("h3",{style:{marginRight:"10px"},children:[t?t.followers.length:"loading..."," ",Object(a.jsx)("span",{children:t?t.followers.length>1?" Followers":" Follower":""})]}),Object(a.jsxs)("h3",{style:{marginRight:"10px"},children:[t?t.following.length:"loading..."," Following"]})]}),Object(a.jsx)(K.a,{accept:"image/*",id:"contained-button-file",multiple:!0,onChange:function(e){var t;t=e.target.files[0],console.log("hello"),p(t)},type:"file"})]})]}),Object(a.jsx)("div",{className:w.grid,children:Object(a.jsx)(ee.a,{cellHeight:200,className:w.gridList,cols:3,spacing:15,children:r.map((function(e){return Object(a.jsx)(te.a,{children:Object(a.jsx)("img",{src:e.image,alt:e.title},e._id)})}))})})]})]})},oe=n(45),ie=n(82),ce=n.n(ie),re=Object(h.a)({root:{width:750,margin:"40px auto"},pos:{marginBottom:12},action:{width:109,margin:"10px auto"},media:{height:0,paddingTop:"56.25%"},inp:{width:"90%",margin:"10px auto",padding:"10px"}});function le(){var e,t=re(),n=Object(o.useState)(""),i=Object(l.a)(n,2),c=i[0],r=i[1],j=Object(o.useState)(""),d=Object(l.a)(j,2),u=d[0],h=d[1],p=Object(o.useState)(""),b=Object(l.a)(p,2),f=b[0],x=b[1],m=Object(o.useState)(""),y=Object(l.a)(m,2),N=y[0],B=y[1],k=Object(o.useState)(null),A=Object(l.a)(k,2),T=A[0],I=A[1],L=Object(s.f)();Object(o.useEffect)((function(){N&&(console.log(N),fetch("/createpost",{headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},method:"post",body:JSON.stringify({title:c,body:u,url:N})}).then((function(e){return e.json()})).then((function(e){e.error?console.log(e.error):(console.log(e),L.push("/"))})).catch((function(e){return console.log(e)})))}),[N]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),Object(a.jsxs)(w.a,{className:t.root,children:[Object(a.jsxs)(_.a,{children:[Object(a.jsx)(g.a,{variant:"h5",style:{textTransform:"uppercase",textAlign:"center",fontWeight:"bold"},children:"New Post"}),Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)(C.a,{type:"email",className:t.inp,value:c,onChange:function(e){return r(e.target.value)},placeholder:"Add Title"}),Object(a.jsx)(C.a,{multiline:!0,type:"text",className:t.inp,value:u,onChange:function(e){return h(e.target.value)},placeholder:"Add Body"})]}),Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",multiple:!0,onChange:function(e){x(e.target.files[0]),I(URL.createObjectURL(e.target.files[0]))},type:"file"}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:T?Object(a.jsx)(w.a,{style:{width:650,margin:"0 auto"},children:Object(a.jsx)(z.a,{className:t.media,image:T})}):Object(a.jsx)(O.a,(e={variant:"contained",color:"primary",component:"span",startIcon:Object(a.jsx)(ce.a,{})},Object(oe.a)(e,"color","primary"),Object(oe.a)(e,"style",{marginLeft:"40px"}),Object(oe.a)(e,"children","Upload"),e))})]})]}),Object(a.jsx)(S.a,{className:t.action,children:Object(a.jsx)(O.a,{style:{textTransform:"capitalize",fontSize:"17px"},variant:"contained",color:"primary",type:"submit",onClick:function(){return function(){var e=new FormData;e.append("file",f),e.append("upload_preset","insta - clone"),e.append("cloud_name","ducw5cejx"),fetch("https://api.cloudinary.com/v1_1/ducw5cejx/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){B(e.url)})).catch((function(e){return console.log(e)}))}()},children:"Add Post"})})]})]})}var se=n(83),je=Object(h.a)((function(e){return{grid:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:"80px"},gridList:{width:800,height:600}}}));function de(){var e=Object(s.g)().id;console.log(e);var t=Object(o.useContext)(ue),n=t.state,i=t.dispatch,c=Object(o.useState)(null),r=Object(l.a)(c,2),j=r[0],u=r[1],h=Object(o.useState)(!n||!n.following.includes(e)),p=Object(l.a)(h,2),b=p[0],g=p[1];Object(o.useEffect)((function(){fetch("/user/".concat(e),{headers:{Authorization:"Bearer"+localStorage.getItem("jwt")},method:"get"}).then((function(e){return e.json()})).then((function(e){u(e)}))}),[]);var f=je();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),j?Object(a.jsxs)("div",{style:{maxWidth:900,fontWeight:"normal",margin:"10px auto"},children:[Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",margin:"20px 0",borderBottom:"1px solid grey"},children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{style:{height:"180px",width:"170px",borderRadius:"50%",marginBottom:"20px"},alt:"profile-pic",src:j.user.image})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{style:{marginTop:"35px",marginBottom:"0"},children:j.user.name}),Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("h3",{style:{marginRight:"10px",fontWeight:"lighter"},children:[j.posts.length," ",Object(a.jsx)("span",{children:j.posts.length>1?"Posts":"Post"})]}),Object(a.jsxs)("h3",{style:{marginRight:"10px",fontWeight:"lighter"},children:[j.user.followers.length," ",Object(a.jsx)("span",{children:j.user.followers.length>1?"Followers":"Follower"})]}),Object(a.jsxs)("h3",{style:{marginRight:"10px",fontWeight:"lighter"},children:[j.user.following.length," Following"]})]}),b?Object(a.jsx)(O.a,{variant:"contained",color:"primary",style:{marginRight:"15px"},onClick:function(){fetch("/follow",{method:"put",headers:{Authorization:"Bearer"+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({followId:e})}).then((function(e){return e.json()})).then((function(e){i({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),u((function(t){return Object(d.a)(Object(d.a)({},t),{},{user:Object(d.a)(Object(d.a)({},t.user),{},{followers:[].concat(Object(se.a)(t.user.followers),[e._id])})})})),g(!b),console.log(e)}))},children:"Follow"}):Object(a.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){fetch("/unfollow",{method:"put",headers:{Authorization:"Bearer"+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({unfollowId:e})}).then((function(e){return e.json()})).then((function(e){i({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),u((function(t){var n=t.user.followers.filter((function(t){return t!==e._id}));return Object(d.a)(Object(d.a)({},t),{},{user:Object(d.a)(Object(d.a)({},t.user),{},{followers:n})})})),g(!b),console.log(e)}))},children:"Unfollow"})]})]}),Object(a.jsx)("div",{className:f.grid,children:Object(a.jsx)(ee.a,{cellHeight:200,className:f.gridList,cols:3,spacing:15,children:j.posts.map((function(e){return Object(a.jsx)(te.a,{children:Object(a.jsx)("img",{src:e.image,alt:e.title},e._id)})}))})})]}):Object(a.jsx)("h2",{children:"Loading..."})]})})}var ue=Object(o.createContext)(),he=function(){var e=Object(s.f)(),t=Object(o.useContext)(ue),n=(t.state,t.dispatch);return Object(o.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?n({type:"USER",payload:t}):e.push("/signin")}),[]),Object(a.jsxs)(s.c,{children:[Object(a.jsx)(s.a,{exact:!0,path:"/",children:Object(a.jsx)(V,{})}),Object(a.jsx)(s.a,{path:"/myfollowingpost",children:Object(a.jsx)(Y,{})}),Object(a.jsx)(s.a,{path:"/createpost",children:Object(a.jsx)(le,{})}),Object(a.jsx)(s.a,{exact:!0,path:"/profile",children:Object(a.jsx)(ae,{})}),Object(a.jsx)(s.a,{path:"/profile/:id",children:Object(a.jsx)(de,{})}),Object(a.jsx)(s.a,{path:"/signup",children:Object(a.jsx)(I,{})}),Object(a.jsx)(s.a,{path:"/signin",children:Object(a.jsx)(k,{})})]})};var pe=function(){var e=Object(o.useReducer)(u,null),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(ue.Provider,{value:{state:n,dispatch:i},children:Object(a.jsx)(j.a,{children:Object(a.jsx)(he,{})})})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),i(e),c(e)}))};r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(pe,{})}),document.getElementById("root")),be()}},[[112,1,2]]]);
//# sourceMappingURL=main.d9fbfd3f.chunk.js.map